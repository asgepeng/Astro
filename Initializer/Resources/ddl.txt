CREATE TABLE countries
(
    `id` SMALLINT NOT NULL,
    `name` VARCHAR(100) NOT NULL DEFAULT '',
    `a2code` CHAR(2) NOT NULL DEFAULT '',
    `a3code` CHAR(3) NOT NULL DEFAULT '',
    `phoneCode` SMALLINT UNSIGNED NOT NULL DEFAULT 0,
    CONSTRAINT pk_countries PRIMARY KEY (`id`)
);
CREATE TABLE provinces
(
    `id` SMALLINT UNSIGNED NOT NULL,
    `name` VARCHAR(100) NOT NULL DEFAULT '',
    `country` SMALLINT NOT NULL DEFAULT 0,
    CONSTRAINT pk_states PRIMARY KEY (`id`)
);
CREATE TABLE cities
(
    `id` INT NOT NULL,
    `name` VARCHAR(200) NOT NULL DEFAULT '',
    `province` SMALLINT UNSIGNED NOT NULL DEFAULT 0,
    CONSTRAINT pk_cities PRIMARY KEY (`id`)
);
CREATE TABLE roles
(
    `id` SMALLINT UNSIGNED AUTO_INCREMENT,
    `name` VARCHAR(150) NOT NULL DEFAULT '',
    `creator` SMALLINT UNSIGNED NOT NULL DEFAULT 0,
    `createdDate` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `editor` SMALLINT UNSIGNED NULL,
    `editedDate` DATETIME NULL,
    CONSTRAINT pk_roles PRIMARY KEY(`id`)
);
CREATE TABLE sections
(
    `id` SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
    `title` VARCHAR(100) NOT NULL DEFAULT '',
    `disabled` TINYINT NOT NULL DEFAULT 0,
    CONSTRAINT pk_sections PRIMARY KEY (`id`)
);
CREATE TABLE menus
(
    `id` SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
    `section` SMALLINT UNSIGNED NOT NULL DEFAULT 0,
    `title` VARCHAR(100) NOT NULL DEFAULT '',
    `tooltipText` VARCHAR(250) NOT NULL DEFAULT '',
    `disabled` TINYINT NOT NULL DEFAULT 0,
    CONSTRAINT pk_menu_items PRIMARY KEY (`id`)
);
CREATE TABLE roletomenus
(
    `roleId` SMALLINT UNSIGNED NOT NULL,
    `menuId` SMALLINT UNSIGNED NOT NULL,
    `allowCreate` TINYINT NOT NULL DEFAULT 0,
    `allowRead` TINYINT NOT NULL DEFAULT 0,
    `allowUpdate` TINYINT NOT NULL DEFAULT 0,
    `allowDelete` TINYINT NOT NULL DEFAULT 0,
    CONSTRAINT pk_role_to_menu_items PRIMARY KEY (`roleId`, `menuId`)
);
CREATE TABLE users
(
    `id` SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
    `prefix` SMALLINT UNSIGNED NOT NULL DEFAULT 0,
    `name` VARCHAR(100) NOT NULL DEFAULT '',
    `suffix` SMALLINT NOT NULL DEFAULT 0,
    `dateOfBirth` DATE NOT NULL DEFAULT '1900-01-01',
    `sex` SMALLINT UNSIGNED NOT NULL DEFAULT 0,
    `maritalStatus` SMALLINT UNSIGNED NOT NULL DEFAULT 0,
    `role` SMALLINT UNSIGNED NOT NULL DEFAULT 0,
    `creator` INT NOT NULL DEFAULT 0,
    `createdDate` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `editor` INT NULL,
    `editedDate` DATETIME NULL,
    `deleted` TINYINT NOT NULL DEFAULT 0,
    CONSTRAINT pk_users PRIMARY KEY (`id`)
);
CREATE TABLE settings
(
    `id` SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
    `name` VARCHAR(100) NOT NULL DEFAULT '',
    `contactType` SMALLINT NOT NULL DEFAULT 0,
    `isActive` TINYINT NOT NULL DEFAULT 0,
    CONSTRAINT pk_contact_settings PRIMARY KEY (`id`)
);
CREATE TABLE addresses
(
    `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
    `userId` INT NOT NULL DEFAULT 0,
    `addressType` SMALLINT NOT NULL DEFAULT 0,
    `streetAddress` VARCHAR(250) NOT NULL DEFAULT '',
    `city` INT NOT NULL DEFAULT 0,
    `zipCode` INT NOT NULL DEFAULT 0,
    `isPrimary` TINYINT NOT NULL DEFAULT 0,
    CONSTRAINT pk_addresses PRIMARY KEY (`id`)
);

CREATE TABLE emails
(
    `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
    `userId` SMALLINT UNSIGNED NOT NULL DEFAULT 0, 
    `emailAddress` VARCHAR(60) NOT NULL DEFAULT '',
    `emailType` SMALLINT UNSIGNED NOT NULL DEFAULT 0,
    `isPrimary` TINYINT NOT NULL DEFAULT 0,
    `creator` SMALLINT UNSIGNED NOT NULL DEFAULT 0,
    `createdDate` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `editor` SMALLINT UNSIGNED NULL,
    `editedDate` DATETIME NULL,
    CONSTRAINT pk_emails PRIMARY KEY (`id`)
);

CREATE TABLE phones
(
    `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
    `userId` SMALLINT UNSIGNED NOT NULL DEFAULT 0,
    `phoneType` SMALLINT UNSIGNED NOT NULL DEFAULT 0,
    `phoneNumber` VARCHAR(60) NOT NULL DEFAULT '',
    `phoneExt` SMALLINT NOT NULL DEFAULT 0,
    `isPrimary` TINYINT NOT NULL DEFAULT 0,
    `creator` INT UNSIGNED NOT NULL DEFAULT 0,
    `createdDate` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `editor` INT NULL,
    `editedDate` DATETIME NULL,
    CONSTRAINT pk_user_phones PRIMARY KEY (`id`)
);

CREATE TABLE faxes
(
    `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
    `userId` SMALLINT UNSIGNED NOT NULL DEFAULT 0,
    `faxType` SMALLINT UNSIGNED NOT NULL DEFAULT 0,
    `faxNumber` VARCHAR(60) NOT NULL DEFAULT '',
    `creator` INT UNSIGNED NOT NULL DEFAULT 0,
    `createdDate` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `editor` INT UNSIGNED NULL,
    `editedDate` DATETIME NULL,
    CONSTRAINT pk_user_faxes PRIMARY KEY (`id`)
);

CREATE TABLE logins
(
    `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
    `username` VARCHAR(30) NOT NULL,
    `passwordHash` BINARY(64) NULL,
    `passwordKey` CHAR(36) NOT NULL,
    `userId` INT NOT NULL DEFAULT 0,
    `isLocked` TINYINT NOT NULL DEFAULT 0,
    `lockedExpired` DATETIME NOT NULL,
    `disabled` TINYINT NOT NULL DEFAULT 0,
    `creator` INT NOT NULL DEFAULT 0,
    `createdDate` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `editor` INT NOT NULL DEFAULT 0,
    `editedDate` DATETIME NULL,
    CONSTRAINT pk_logins PRIMARY KEY (`id`),
    UNIQUE KEY uq_logins_username (`username`)
);

CREATE TABLE auths
(
    `token` CHAR(36) NOT NULL,
    `userId` INT UNSIGNED NOT NULL DEFAULT 0,
    `expiredDate` DATETIME NOT NULL,
    `ipv4Address` INT NOT NULL DEFAULT 0,
    `ipv6Address` BINARY(16) NULL,
    `userAgent` VARCHAR(250) NOT NULL DEFAULT '',
    CONSTRAINT pk_auths PRIMARY KEY (`token`)
);
CREATE TABLE units
(
    `id` SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
    `name` VARCHAR(100) NOT NULL DEFAULT '',
    `creator` INT UNSIGNED NOT NULL DEFAULT 0,
    `createdDate` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `editor` INT UNSIGNED NULL,
    `editedDate` DATETIME NULL,
    CONSTRAINT pk_units PRIMARY KEY (`id`)
);

CREATE TABLE categories
(
    `id` SMALLINT UNSIGNED AUTO_INCREMENT,
    `name` VARCHAR(100) NOT NULL DEFAULT '',
    `creator` INT UNSIGNED NOT NULL DEFAULT 0,
    `createdDate` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `editor` INT NULL,
    `editedDate` DATETIME NULL,
    `deleted` TINYINT NOT NULL DEFAULT 0,
    CONSTRAINT pk_categories PRIMARY KEY (`id`)
);

CREATE TABLE products 
(
    `id` SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
    `name` VARCHAR(100) NOT NULL DEFAULT '',
    `description` VARCHAR(8000) NOT NULL DEFAULT '',
    `sku` BIGINT UNSIGNED NOT NULL DEFAULT 0,
    `category` SMALLINT UNSIGNED NOT NULL DEFAULT 0,
    `type` SMALLINT UNSIGNED NOT NULL DEFAULT 0,
    `active` SMALLINT UNSIGNED NOT NULL DEFAULT 0,
    `stock` INT UNSIGNED NOT NULL DEFAULT 0,
    `minStock` INT UNSIGNED NOT NULL DEFAULT 0,
    `maxStock` INT UNSIGNED NOT NULL DEFAULT 0,
    `unit` SMALLINT UNSIGNED NOT NULL DEFAULT 0,
    `price` BIGINT UNSIGNED NOT NULL DEFAULT 0,
    `costAverage` BIGINT UNSIGNED NOT NULL DEFAULT 0,
    `images` VARCHAR(250) NOT NULL DEFAULT '',
    `creator` INT UNSIGNED NOT NULL DEFAULT 0,
    `createdDate` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `editor` INT UNSIGNED NULL,
    `editedDate` DATETIME NULL,
    `deleted` TINYINT NOT NULL DEFAULT 0,
    CONSTRAINT pk_products PRIMARY KEY (`id`)
);

CREATE TABLE contactgroups
(
    `id` SMALLINT UNSIGNED AUTO_INCREMENT,
    `name` VARCHAR(100) NOT NULL DEFAULT '',
    `contactType` SMALLINT UNSIGNED NOT NULL DEFAULT 0,
    `creator` INT UNSIGNED NOT NULL DEFAULT 0,
    `createdDate` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `editor` INT UNSIGNED NULL,
    `editedDate` DATETIME NULL,
    `deleted` TINYINT NOT NULL DEFAULT 0,
    CONSTRAINT pk_contact_groups PRIMARY KEY (`id`)
);

CREATE TABLE contacts
(
    `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
    `name` VARCHAR(100) NOT NULL DEFAULT '',
    `contactType` SMALLINT UNSIGNED NOT NULL DEFAULT 0,
    `groupId` SMALLINT NOT NULL DEFAULT 0,
    `arLimit` BIGINT UNSIGNED NOT NULL DEFAULT 0,
    `arLimitDay` SMALLINT UNSIGNED NOT NULL DEFAULT 0,
    `creator` INT UNSIGNED NOT NULL DEFAULT 0,
    `createdDate` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `editor` INT UNSIGNED NULL,
    `editedDate` DATETIME NULL,
    `deleted` TINYINT NOT NULL DEFAULT 0,
    CONSTRAINT pk_contacts PRIMARY KEY (`id`)
);

CREATE TABLE contactaddresses
(
    `id` INT UNSIGNED AUTO_INCREMENT,
    `contactId` INT UNSIGNED NOT NULL DEFAULT 0,
    `streetAddress` VARCHAR(250) NOT NULL DEFAULT '',
    `city` INT UNSIGNED NOT NULL DEFAULT 0,
    `zipCode` INT UNSIGNED NOT NULL DEFAULT 0,
    `isPrimary` TINYINT NOT NULL DEFAULT 0,
    CONSTRAINT pk_contact_addresses PRIMARY KEY (`id`)
);

CREATE TABLE contactphones
(
    `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
    `contactId` INT UNSIGNED NOT NULL DEFAULT 0,
    `number` VARCHAR(25) NOT NULL DEFAULT '',
    `phoneType` SMALLINT UNSIGNED NOT NULL DEFAULT 0,
    `isPrimary` TINYINT NOT NULL DEFAULT 0,
    CONSTRAINT pk_contact_phones PRIMARY KEY (`id`)
);

CREATE TABLE wsprices
(
    `productId` INT UNSIGNED NOT NULL,
    `minQty` INT UNSIGNED NOT NULL,
    `price` BIGINT UNSIGNED NOT NULL DEFAULT 0,
    CONSTRAINT pk_product_ws_prices PRIMARY KEY (`productId`, `minQty`)
);

CREATE TABLE promotions
(
    `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
    `title` VARCHAR(250) NOT NULL DEFAULT '',
    `startDate` DATETIME NOT NULL,
    `endDate` DATETIME NOT NULL,
    `isActive` TINYINT NOT NULL DEFAULT 0,
    `creator` INT UNSIGNED NOT NULL DEFAULT 0,
    `createdDate` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `editor` INT UNSIGNED NULL,
    `editedDate` DATETIME NULL,
    `deleted` TINYINT NOT NULL DEFAULT 0,
    CONSTRAINT pk_promotions PRIMARY KEY (`id`)
);

CREATE TABLE promoproducts
(
    `promotionId` INT UNSIGNED NOT NULL,
    `productId` INT UNSIGNED NOT NULL,
    `discountType` SMALLINT NOT NULL DEFAULT 0,
    `discountValue` INT UNSIGNED NOT NULL DEFAULT 0,
    CONSTRAINT pk_promotion_products PRIMARY KEY (`promotionId`, `productId`)
);

CREATE TABLE groupprices
(
    `groupId` SMALLINT UNSIGNED NOT NULL,
    `productId` SMALLINT UNSIGNED NOT NULL,
    `minQty` INT UNSIGNED NOT NULL DEFAULT 0,
    `discountType` SMALLINT UNSIGNED NOT NULL DEFAULT 0,
    `discountAmount` INT UNSIGNED NOT NULL DEFAULT 0,
    CONSTRAINT pk_customer_group_prices PRIMARY KEY (`groupId`, `productId`)
);

CREATE TABLE vouchers
(
    `id` BIGINT UNSIGNED NOT NULL,
    `expiredDate` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `amount` BIGINT UNSIGNED NOT NULL DEFAULT 0,
    `creator` INT UNSIGNED NOT NULL DEFAULT 0,
    `createdDate` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT pk_vouchers PRIMARY KEY (`id`)
);

CREATE TABLE accproviders
(
    `id` SMALLINT NOT NULL,
    `name` VARCHAR(100) NOT NULL DEFAULT '',
    `accountType` SMALLINT NOT NULL DEFAULT 0,
    CONSTRAINT df_account_providers PRIMARY KEY (`id`)
);

CREATE TABLE accounts
(
    `id` SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
    `accountType` SMALLINT UNSIGNED NOT NULL DEFAULT 0,
    `accountName` VARCHAR(250) NOT NULL DEFAULT '',
    `accountNumber` VARCHAR(50) NOT NULL DEFAULT '',
    `bank` SMALLINT UNSIGNED NOT NULL DEFAULT 0,
    `creator` INT UNSIGNED NOT NULL DEFAULT 0,
    `createdDate` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `editor` INT UNSIGNED NULL,
    `editedDate` DATETIME NULL,
    `deleted` TINYINT NOT NULL DEFAULT 0,
    CONSTRAINT pk_accounts PRIMARY KEY (`id`)
);

CREATE TABLE cashflows
(
    `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
    `date` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `accounId` SMALLINT UNSIGNED NOT NULL DEFAULT 0,
    `accountType` SMALLINT UNSIGNED NOT NULL DEFAULT 0,
    `debt` BIGINT UNSIGNED NOT NULL DEFAULT 0,
    `credit` BIGINT UNSIGNED NOT NULL DEFAULT 0,
    `creator` INT UNSIGNED NOT NULL DEFAULT 0,
    `createdDate` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT pk_cashflows PRIMARY KEY (`id`)
);
create table auto_numbers
(
	rec_id int not null primary key,
	so int not null default 1,
	pb int not null default 1,
	rt int not null default 1,
	pj int not null default 1,
	rj int not null default 1
);
CREATE TABLE stock_flows
(
    id UUID NOT NULL PRIMARY KEY,
    type SMALLINT NOT NULL DEFAULT 0,
    stock INT NOT NULL DEFAULT 0,
    qty INT NOT NULL DEFAULT 0,
    notes VARCHAR(255) NOT NULL DEFAULT '',
    user_id SMALLINT NOT NULL DEFAULT 0,
    created_date TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);
create table stock_opnames
(
    so_id               UUID            NOT NULL PRIMARY KEY,
    so_number           VARCHAR(25)     NOT NULL DEFAULT '',
    so_date             TIMESTAMP       NOT NULL DEFAULT CURRENT_TIMESTAMP,
    product_id          SMALLINT        NOT NULL DEFAULT 0,
    system_stock        INT             NOT NULL DEFAULT 0,
    actual_stock        INT             NOT NULL DEFAULT 0,
    status              SMALLINT        NOT NULL DEFAULT 0,
    notes               VARCHAR(255)    NOT NULL DEFAULT '',
    user_id             SMALLINT        NOT NULL DEFAULT 0,
    created_date        TIMESTAMP       NOT NULL DEFAULT CURRENT_TIMESTAMP
)